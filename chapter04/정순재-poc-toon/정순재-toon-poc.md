# TOON Format POC - 벤치마크 결과

> gpt-4.1-nano 모델을 사용한 토큰 효율성 및 정확도 비교

---

## Users (Flat Structure)

| 포맷 | 토큰 수 | 바이트 | 문자 수 | 토큰 절감률 | 정확도 |
|------|-------:|------:|-------:|----------:|-------:|
| JSON Compact | 4,303 | 12,268 | 12,268 | 0.0% | 40.0% |
| TOON | 2,981 | 6,910 | 6,910 | 30.7% | 60.0% |
| Plain Text | 4,205 | 10,790 | 10,790 | 2.3% | 40.0% |
| YAML | 5,100 | 12,067 | 12,067 | -18.5% | 0.0% |
| CSV | 2,776 | 6,502 | 6,502 | 35.5% | 0.0% |

### 주요 결과

- **TOON 토큰 절감**: 30.7% (효율적)
- **TOON 정확도**: 60.0% (JSON: 40.0%)

## Products (Mixed Content)

| 포맷 | 토큰 수 | 바이트 | 문자 수 | 토큰 절감률 | 정확도 |
|------|-------:|------:|-------:|----------:|-------:|
| JSON Compact | 1,466 | 6,047 | 6,047 | 0.0% | 50.0% |
| TOON | 1,772 | 6,351 | 6,351 | -20.9% | 50.0% |
| Plain Text | 1,325 | 5,294 | 5,294 | 9.6% | 25.0% |
| YAML | 1,842 | 6,256 | 6,256 | -25.6% | 0.0% |
| CSV | 1,147 | 4,173 | 4,173 | 21.8% | 0.0% |

### 주요 결과

- **TOON 토큰 증가**: 20.9% (비효율적)
  - 원인: TOON의 들여쓰기/줄바꿈이 토크나이저에서 더 많은 토큰으로 분리됨
  - 바이트 수는 더 많고, 토큰 수는 더 많음
- **TOON 정확도**: 50.0% (JSON: 50.0%)

## Orders (Semi-nested)

| 포맷 | 토큰 수 | 바이트 | 문자 수 | 토큰 절감률 | 정확도 |
|------|-------:|------:|-------:|----------:|-------:|
| JSON Compact | 4,448 | 13,337 | 13,337 | 0.0% | 0.0% |
| TOON | 4,765 | 11,698 | 11,698 | -7.1% | 25.0% |
| Plain Text | 3,672 | 7,876 | 7,775 | 17.4% | 25.0% |
| YAML | 5,678 | 14,902 | 14,902 | -27.7% | 0.0% |
| CSV | 4,115 | 10,454 | 10,454 | 7.5% | 0.0% |

### 주요 결과

- **TOON 토큰 증가**: 7.1% (비효율적)
  - 원인: TOON의 들여쓰기/줄바꿈이 토크나이저에서 더 많은 토큰으로 분리됨
  - 바이트 수는 더 적지만, 토큰 수는 더 많음
- **TOON 정확도**: 25.0% (JSON: 0.0%)

## Config (Deeply Nested)

| 포맷 | 토큰 수 | 바이트 | 문자 수 | 토큰 절감률 | 정확도 |
|------|-------:|------:|-------:|----------:|-------:|
| JSON Compact | 234 | 908 | 908 | 0.0% | 60.0% |
| TOON | 284 | 1,006 | 1,006 | -21.4% | 60.0% |
| Plain Text | 233 | 878 | 878 | 0.4% | 40.0% |
| YAML | 298 | 1,087 | 1,087 | -27.4% | 0.0% |

### 주요 결과

- **TOON 토큰 증가**: 21.4% (비효율적)
  - 원인: TOON의 들여쓰기/줄바꿈이 토크나이저에서 더 많은 토큰으로 분리됨
  - 바이트 수는 더 많고, 토큰 수는 더 많음
- **TOON 정확도**: 60.0% (JSON: 60.0%)

## Logs (Uniform Array - TOON Optimized)

| 포맷 | 토큰 수 | 바이트 | 문자 수 | 토큰 절감률 | 정확도 |
|------|-------:|------:|-------:|----------:|-------:|
| JSON Compact | 11,503 | 33,243 | 33,243 | 0.0% | 20.0% |
| TOON | 8,517 | 18,901 | 18,901 | 26.0% | 20.0% |
| Plain Text | 8,306 | 19,377 | 19,377 | 27.8% | 20.0% |
| YAML | 13,700 | 33,042 | 33,042 | -19.1% | 0.0% |
| CSV | 8,063 | 17,693 | 17,693 | 29.9% | 0.0% |

### 주요 결과

- **TOON 토큰 절감**: 26.0% (효율적)
- **TOON 정확도**: 20.0% (JSON: 20.0%)

---

## 전체 요약

### 포맷별 평균 성능

| 포맷 | 평균 토큰 절감률 | 평균 정확도 |
|------|---------------:|----------:|
| JSON Compact | 0.0% | 34.0% |
| TOON | 1.5% | 43.0% |
| Plain Text | 11.5% | 30.0% |
| YAML | -23.7% | 0.0% |
| CSV | 23.7% | 0.0% |

## 결론

TOON 포맷은 JSON compact 대비 평균 **1.5%**의 토큰을 절감하면서 
**43.0%**의 정확도를 유지했습니다.

### 데이터셋별 TOON 성능 분석

- **Users (Flat Structure)**: 30.7% 절감 ✅
- **Products (Mixed Content)**: 20.9% 증가 ❌
- **Orders (Semi-nested)**: 7.1% 증가 ❌
- **Config (Deeply Nested)**: 21.4% 증가 ❌
- **Logs (Uniform Array - TOON Optimized)**: 26.0% 절감 ✅

### 주요 인사이트

1. **Uniform Array (Users)**: TOON이 가장 효과적 (30.7% 절감)
   - 동일한 구조의 행이 많을수록 필드명 반복 제거 효과가 큼

2. **Mixed/Nested Structures (Products, Orders, Config)**: TOON이 비효율적
   - 들여쓰기, 줄바꿈, 콜론 등 구조 문자가 토크나이저에서 더 많은 토큰으로 분리됨
   - JSON compact의 한 줄 압축이 토큰 측면에서 더 유리함
   - 바이트 수는 TOON이 더 적을 수 있지만, 토큰 수는 더 많을 수 있음

3. **토큰 vs 바이트**: TOON은 바이트 효율성은 좋지만, 토큰 효율성은 데이터 구조에 따라 다름
   - LLM API 비용은 토큰 수 기준이므로, 토큰 수가 더 중요함

> ⚠️ **정확도**: 평균 43.0% (개선 필요)
