# 📘 데이터 중심 애플리케이션 설계
## Chapter 3. 저장소와 검색

---

### 3장을 읽으며 느낀 전반적인 인상

3장은 데이터베이스 저장소 엔진을 중심으로  
데이터가 내부적으로 어떻게 저장되고 검색되는지를 전반적으로 다루고 있었다.

실무에서는 SQL 쿼리를 정말 많이 작성해왔지만,  
이 쿼리가 **어떤 저장 구조 위에서 어떤 방식으로 동작하는지**까지  
깊게 고민해본 적은 많지 않았던 것 같다.

이번 장을 통해  
B-트리, SS테이블, LSM 트리 같은 용어들을 처음 제대로 접했고,  
각 저장소 엔진이 어떤 문제를 해결하기 위해 등장했는지,  
그리고 그 결과로 어떤 성능 특성을 가지게 되는지를  
흐름으로 이해할 수 있어서 좋았다.

---

### B-트리와 트랜잭션 처리(OLTP)

3장에서 가장 익숙하게 느껴졌던 저장 구조는 **B-트리**였다.  
B-트리는 대부분의 관계형 데이터베이스에서 기본 색인 구조로 사용되며,  
우리가 실무에서 사용하는 일반적인 조회, 수정, 삭제 쿼리는  
대부분 B-트리 기반에서 처리된다.

B-트리는 키를 기준으로 정렬된 구조를 유지하면서  
고정 크기 페이지 단위로 데이터를 관리하고,  
페이지가 가득 차면 분할하면서도  
트리의 균형을 유지하도록 설계되어 있다.

이 덕분에
- 특정 키 조회
- 범위 조회
- 잦은 읽기와 쓰기가 발생하는 트랜잭션 처리

와 같은 **OLTP(온라인 트랜잭션 처리)** 성격의 작업에 잘 어울린다.

지금까지는 “인덱스가 있어서 빠르다” 정도로만 이해하고 있었는데,  
이번 장을 통해 B-트리가 **제자리 갱신(update-in-place)** 구조를 가지기 때문에  
트랜잭션 처리에 유리하고, 읽기 성능이 비교적 예측 가능하다는 점을 이해하게 되었다.

---

### OLTP와 OLAP를 구분해서 보게 된 계기

이번 장에서 가장 크게 와닿았던 부분은 **OLTP와 OLAP의 접근 패턴 차이**였다.

OLTP는
- 사용자 입력 기반
- 소수의 레코드를 빠르게 읽고 쓰는 패턴
- 낮은 지연 시간(latency)이 중요한 시스템

반면 OLAP는
- 대량의 데이터를 한 번에 스캔
- 집계, 통계, 분석 중심
- 디스크 탐색보다는 디스크 대역폭이 병목이 되는 시스템

이라는 점이 명확히 대비됐다.

---

### 현재 프로젝트와 OLAP의 연결

현재 프로젝트는 국내 물류 시스템과 해외 물류 시스템의 데이터를  
**일 단위 배치로 수집**해 데이터베이스에 적재하고,  
이를 기반으로 전체 데이터를 분석하여  
**운영 현황을 한눈에 볼 수 있는 지표와 통계 화면을 제공하는 구조**다.

아직 분석 단계라 전체 테이블 구조를 완전히 파악한 상태는 아니지만,  
큰 흐름을 보면 전형적인 **OLAP(Online Analytical Processing)** 아키텍처의 형태를 띠고 있다.

구조를 정리해보면 다음과 같다.

- 각 시스템에서 수집한 **원천 데이터를 마스터성 테이블**에 적재하고
- 이 데이터를 기준으로 **집계·가공된 통계 테이블**을 생성한 뒤
- 실제 화면 조회는 원천 데이터가 아닌 **통계 테이블을 중심으로 수행**한다

이러한 구조는 실시간 트랜잭션을 빠르게 처리하는 OLTP와는 다르게,  
**대량의 데이터를 주기적으로 적재하고 전체를 스캔해 집계·분석하는 접근 패턴**에 가깝다.  
즉, 개별 레코드 단위의 처리 성능보다는  
**기간별·구간별 비교, 추세 분석, 운영 지표 산출**이 핵심인 OLAP의 특성과 잘 맞는다.

---

### 개인적인 정리

3장은 단순히 저장소 엔진의 종류를 나열하는 장이 아니라,  
“이 데이터베이스는 어떤 문제를 풀기 위해 이런 구조를 선택했는가”를  
생각하게 만들어 준 장이었다.

앞으로는 쿼리를 작성할 때도 “이 쿼리가 어떤 저장 구조 위에서 실행되고 있는가”를  
한 번쯤 더 생각해보게 될 것 같다.
